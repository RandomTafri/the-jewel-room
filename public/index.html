<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Jewel Room</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Horizontal Scroll for Collections */
        .scrolling-wrapper {
            display: flex;
            overflow-x: auto;
            gap: 20px;
            padding-bottom: 20px;
            -webkit-overflow-scrolling: touch;
            justify-content: center;
        }

        .scrolling-wrapper::-webkit-scrollbar {
            height: 8px;
        }

        .scrolling-wrapper::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 4px;
        }

        /* Circular Collection Design */
        .collection-item {
            flex: 0 0 160px;
            /* Fixed width */
            text-align: center;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .collection-item:hover {
            opacity: 0.8;
        }

        .collection-img-box {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            border: 3px solid #D4AF37;
            /* Gold Border */
            overflow: hidden;
            margin: 0 auto;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .collection-img-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .collection-title {
            margin-top: 15px;
            font-family: 'Lato', sans-serif;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #333;
            font-weight: 700;
        }
    </style>
</head>

<body>
    <header>
        <div class="container flex justify-between items-center">
            <div class="logo">
                <a href="index.html">
                    <h1>The Jewel Room</h1>
                </a>
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="brochures.html">Brochures</a></li>
                    <li><a href="cart.html">Cart (<span id="cart-count">0</span>)</a></li>
                    <li id="auth-links"><a href="account.html">Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero -->
    <section class="hero section"
        style="position: relative; height: 600px; display: flex; align-items: center; text-align: center; color: white;">
        <div style="position: absolute; top:0; left:0; width: 100%; height: 100%; z-index: -1;">
            <img src="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?auto=format&fit=crop&w=1500&q=80"
                style="width: 100%; height: 100%; object-fit: cover; filter: brightness(0.5);">
        </div>
        <div class="container">
            <h2 style="font-size: 3.5rem; margin-bottom: 20px;">Elegance is Eternal</h2>
            <p style="margin-bottom: 30px; font-size: 1.5rem;">Discover our exclusive collection of artificial jewelry.
            </p>
            <a href="shop.html" class="btn">Shop Now</a>
        </div>
    </section>

    <!-- About Us -->
    <section class="section">
        <div class="container text-center" style="max-width: 800px;">
            <h3>About The Jewel Room</h3>
            <p style="margin-top: 20px; font-size: 1.1rem; color: #555;">
                Welcome to The Jewel Room, where tradition meets contemporary elegance. We specialize in high-quality
                artificial jewelry that captures the essence of luxury without the hefty price tag. Our curated
                collections are designed to make you shine on every occasion, from grand weddings to intimate
                gatherings.
            </p>
        </div>
    </section>

    <!-- Collections (Dynamic) -->
    <section class="section" style="background-color: #fbfbfb;">
        <div class="container">
            <h3 class="text-center"
                style="font-size: 1.5rem; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 30px;">Explore
                Categories</h3>
            <div id="collections-list" class="scrolling-wrapper" style="margin-top: 40px;">
                <p class="text-center" style="width: 100%;">Loading Collections...</p>
            </div>
        </div>
    </section>

    <!-- Featured Products -->
    <section class="section">
        <div class="container">
            <h3 class="text-center">Featured Products</h3>
            <div id="featured-products" class="grid"
                style="grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); margin-top: 30px;">
                <p class="text-center">Loading...</p>
            </div>
            <div class="text-center" style="margin-top: 40px;">
                <a href="shop.html" class="btn">More Products</a>
            </div>
        </div>
    </section>

    <!-- Brochures Section -->
    <section class="section" style="background-color: #fbfbfb;">
        <div class="container">
            <h3 class="text-center">Product Brochures</h3>
            <div id="home-brochures-list" class="grid"
                style="grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); margin-top: 30px; gap: 30px;">
                <p class="text-center">Loading brochures...</p>
            </div>
            <div class="text-center" style="margin-top: 40px;">
                <a href="brochures.html" class="btn">More Brochures</a>
            </div>
        </div>
    </section>

    <!-- Reviews -->
    <section class="section" style="background-color: var(--secondary-color);">
        <div class="container text-center">
            <h3>Customer Reviews</h3>
            <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); margin-top: 40px;">
                <div style="background: white; padding: 20px; border-radius: 5px;">
                    <p style="font-style: italic;">"Absolutely stunning designs! I wore the Kundan set for a wedding and
                        got so many compliments."</p>
                    <h5 style="margin-top: 15px;">- Priya S.</h5>
                </div>
                <div style="background: white; padding: 20px; border-radius: 5px;">
                    <p style="font-style: italic;">"Great quality and fast delivery. The packing was also very secure.
                        Will order again!"</p>
                    <h5 style="margin-top: 15px;">- Anjali M.</h5>
                </div>
                <div style="background: white; padding: 20px; border-radius: 5px;">
                    <p style="font-style: italic;">"Loved the earrings. They look just like real gold. Highly
                        recommended."</p>
                    <h5 style="margin-top: 15px;">- Sneha R.</h5>
                </div>
            </div>
            <div style="margin-top: 30px;">
                <a href="https://maps.google.com" target="_blank" class="btn-outline"
                    style="border-color: #333; color: #333;">Read More on Google</a>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section class="section">
        <div class="container text-center">
            <h3>Get In Touch</h3>
            <div style="margin-top: 30px; font-size: 1.2rem;">
                <p>Have questions? We are here to help.</p>
                <div class="flex" style="justify-content: center; gap: 20px; margin-top: 20px;">
                    <!-- Enhanced Colors -->
                    <a href="#" onclick="openWhatsAppContact()" class="btn"
                        style="background: linear-gradient(45deg, #25D366, #128C7E); border: none; font-weight: bold;">
                        <i class="fa-brands fa-whatsapp"></i> Chat on WhatsApp
                    </a>
                    <a href="https://instagram.com" target="_blank" class="btn"
                        style="background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D); border: none; font-weight: bold;">
                        <i class="fa-brands fa-instagram"></i> Follow on Instagram
                    </a>
                </div>
                <p style="margin-top: 20px; font-size: 1rem;">Email: <span id="contact-email">...</span></p>
            </div>
        </div>
    </section>

    <footer>
        <div class="container text-center">
            <p>&copy; 2024 The Jewel Room. All rights reserved.</p>
        </div>
    </footer>

    <script src="js/app.js"></script>
    <script>
        // Load Featured
        async function loadFeatured() {
            try {
                const products = await API.get('/products');
                const container = document.getElementById('featured-products');
                container.innerHTML = '';

                products.slice(0, 4).forEach(p => {
                    const el = document.createElement('div');
                    el.className = 'product-card';
                    el.innerHTML = `
                        <img src="${p.image_url || 'https://via.placeholder.com/200'}" alt="${p.name}">
                        <div class="card-info">
                            <h4>${p.name}</h4>
                            <p>${formatPrice(p.price)}</p>
                            <a href="product.html?id=${p.id}" class="btn-outline">View</a>
                        </div>
                    `;
                    container.appendChild(el);
                });
            } catch (e) {
                console.error(e);
            }
        }

        async function loadCollections() {
            try {
                const cats = await API.get('/categories');
                const container = document.getElementById('collections-list');

                if (cats.length === 0) {
                    // Default static fallback IF no categories
                    container.innerHTML = '<p>No collections found. Add categories in Admin.</p>';
                    return;
                }

                container.innerHTML = cats.map(c => `
                    <div class="collection-item" onclick="window.location.href='shop.html?cat=${c.name}'">
                        <div class="collection-img-box">
                             <img src="/api/categories/${c.id}/image" onerror="this.src='https://via.placeholder.com/150?text=${c.name}'">
                        </div>
                        <div class="collection-title">${c.name}</div>
                    </div>
                `).join('');
            } catch (e) { console.error(e); }
        }

        async function loadBrochures() {
            try {
                const brochures = await API.get('/brochures');
                const container = document.getElementById('home-brochures-list');

                if (brochures.length === 0) {
                    container.innerHTML = '<p class="text-center">No brochures available.</p>';
                    return;
                }

                // Show only first 3 or 4
                container.innerHTML = brochures.slice(0, 4).map(b => `
                    <div style="background: #fff; border: 1px solid #eee; padding: 15px; border-radius: 5px; text-align: center;">
                        <div style="height: 180px; overflow: hidden; background: #f9f9f9; display: flex; align-items: center; justify-content: center; margin-bottom: 15px; border: 1px solid #eee; border-radius: 4px;">
                            <img src="/api/brochures/${b.id}/thumbnail" alt="${b.title}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.src='https://via.placeholder.com/200?text=Brochure'">
                        </div>
                        <h4 style="margin-bottom: 10px; font-size: 1rem; min-height: 2.5rem;">${b.title}</h4>
                        <a href="${b.link || '#'}" target="_blank" class="btn-outline" style="width: 100%;">View</a>
                    </div>
                `).join('');
            } catch (e) { console.error(e); }
        }

        function openWhatsAppContact() {
            const url = `https://wa.me/${State.config.whatsappNumber}?text=${encodeURIComponent("Hi, I would like to know more about your products.")}`;
            window.open(url, '_blank');
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadFeatured();
            loadCollections();
            loadBrochures();
            setTimeout(() => {
                const emailEl = document.getElementById('contact-email');
                if (emailEl && State.config) {
                    emailEl.innerHTML = `<a href="mailto:${State.config.supportEmail}" style="color: inherit; text-decoration: underline;">${State.config.supportEmail}</a>`;
                }
            }, 500);
        });
    </script>
</body>

</html>